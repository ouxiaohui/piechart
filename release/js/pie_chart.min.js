window.onload=function(){function e(e,t,n){function o(e,t){if("object"==typeof e)for(var n in e)"object"!=typeof e[n]||e[n]instanceof Array?t[n]=e[n]||t[n]:o(e[n],t[n])}function c(e){if(e instanceof Array)for(var t=0;t<e.length;t++)for(var n in e[t])e[t][n]&&(r[t][n]=e[t][n])}function a(){context.lineWidth=f.lineWidth,context.lineCap="round";for(var e=0;e<t.length;e++)context.beginPath(),context.strokeStyle=f.bgcolor[e],context.arc(f.centerX,f.centerY,f.radius-e*f.lineWidth,0,2*Math.PI,!1),context.stroke(),context.closePath(),d+=t[e].num;context.beginPath(),context.fillStyle=f.font.color,context.font=f.font.circle_fontSize+"pt "+f.font.fontFamily,context.textAlign="center",context.fillText(d,f.centerX,f.centerY-f.font.circle_fontSize/3),context.closePath(),context.beginPath(),context.font=f.font.fontSize+"pt "+f.font.fontFamily,context.textAlign="center",context.fillText("总计",f.centerX,f.centerY+(f.font.circle_fontSize-0)),context.closePath()}function i(e){for(var n=0;n<t.length;n++){var o=context.createLinearGradient(30,30,200,200);o.addColorStop(0,e[n].linears[0]),o.addColorStop(.3,e[n].linears[1]),o.addColorStop(.6,e[n].linears[2]),o.addColorStop(1,e[n].linears[3]),context.beginPath(),context.strokeStyle=o,context.arc(f.centerX,f.centerY,f.radius-n*f.lineWidth,-Math.PI/2,2*Math.PI*e[n].rate-Math.PI/2,!1),context.stroke(),context.closePath(),context.beginPath(),context.moveTo(f.lineToX,f.lineToY+f.eachDesHeight*n),context.lineTo(f.lineToX+f.desLineWidth,f.lineToY+f.eachDesHeight*n),context.stroke(),context.closePath(),context.beginPath(),context.font=f.font.fontSize+"pt "+f.font.fontFamily,context.textAlign="left",context.fillStyle=f.font.color,context.fillText(e[n].name,f.desToX,f.desToY+f.eachDesHeight*n+f.font.fontSize/2),context.fillText(100*e[n].rate+" %",f.percentToX,f.percentToY+f.eachDesHeight*n+f.font.fontSize/2),context.fillText(e[n].num,f.numToX,f.numToY+f.eachDesHeight*n+f.font.fontSize/2),context.fillText(f.unit,f.unitToX,f.unitToY+f.eachDesHeight*n+f.font.fontSize/2),context.closePath()}}var f={width:650,height:260,lineWidth:12,unit:"人",radius:101,centerX:110,centerY:110,marginTop:45,desLineWidth:20,desToX:304,desToY:43,lineToX:256,lineToY:45,percentToX:411,percentToY:45,numToX:496,numToY:45,unitToX:540,unitToY:45,eachDesHeight:37,bgcolor:["#3b3538","#373134","#352f32","#322c2f","#2a2427"],font:{fontSize:"14",fontFamily:"Calibri",textAlign:"center",color:"#FFFFFF",fontSize_small:"12",circle_fontSize:"19"}},r=[{rate:"0.2",num:3210,name:"新客户",linears:["#98d36f","#93d272","#72c98f","#5ac2a0"]},{rate:"0.4",num:6240,name:"主力客户",linears:["#ff9d76","#ffad6c","#ffb76a","#ffc064"]},{rate:"0.18",num:2808,name:"瞌睡客户",linears:["#56abe7","#49aee1","#36b4d8","#23b9cf"]},{rate:"0.12",num:1872,name:"休睡客户",linears:["#f3ce56","#efce56","#d7d05e","#c0d162"]},{rate:"0.1",num:1560,name:"沉睡客户",linears:["#9098f0","#9495ea","#aa8fcf","#c785a3"]}];o(n,f),c(t),console.log("defaultConfig:"),console.log(f);var l=document.getElementById(e);l.height=f.height,l.width=f.width,context=l.getContext("2d");var d=0;a(),i(r)}var t=[{rate:"0.2",num:3210,name:"新客户",linears:["#b8ff86","#93d272","#72c98f","#5ac2a0"]},{rate:"0.5",num:6240,name:"主力客户",linears:["#ff9d76","#ffad6c","#ffb76a","#ffc064"]},{rate:"0.18",num:2808,name:"瞌睡客户",linears:["#56abe7","#49aee1","#36b4d8","#23b9cf"]},{rate:"0.12",num:1872,name:"休睡客户",linears:["#f3ce56","#efce56","#d7d05e","#c0d162"]},{rate:"0.1",num:1560,name:"沉睡客户",linears:["#9098f0","#9495ea","#aa8fcf","#c785a3"]}];e("customer-effective",t,{unit:"个"})};